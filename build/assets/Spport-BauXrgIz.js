import{T as y,l as w,c as k,w as x,o as s,a as e,g as o,h as f,n as u,t as l,F as p,i as z,e as M,f as j,u as c,d as m,b as V}from"./app-QSAf45D3.js";import{_ as B}from"./AdminLayout-DNscmmc0.js";import{_ as g}from"./InputError-BAzQBbcT.js";const $={class:"block p-4"},C={class:"grid grid-cols-1 lg:grid-cols-4 gap-4"},F={class:"block bg-white p-4 rounded-md shadow-md h-[690px] overflow-auto"},H=["href"],S=["src"],E={class:"text-xl font-bold"},I={class:"block col-span-3 w-full"},N={key:0,class:"block"},T={key:0,class:"block"},A={key:1},D={class:"block p-4 bg-white border rounded-md shadow-sm mb-4",style:{overflow:"auto","max-height":"500px"},id:"messages"},O={key:0,class:"block"},q={key:0,class:"block w-36 mb-4 p-4"},L=["src"],U={key:1,class:"block bg-primary rounded-md mb-4 p-4"},W=["href"],G={class:"text-white"},J=e("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"w-12 h-12 inline"},[e("path",{d:"M8.267 14.68c-.184 0-.308.018-.372.036v1.178c.076.018.171.023.302.023.479 0 .774-.242.774-.651 0-.366-.254-.586-.704-.586zm3.487.012c-.2 0-.33.018-.407.036v2.61c.077.018.201.018.313.018.817.006 1.349-.444 1.349-1.396.006-.83-.479-1.268-1.255-1.268z",fill:"white"}),e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM9.498 16.19c-.309.29-.765.42-1.296.42a2.23 2.23 0 0 1-.308-.018v1.426H7v-3.936A7.558 7.558 0 0 1 8.219 14c.557 0 .953.106 1.22.319.254.202.426.533.426.923-.001.392-.131.723-.367.948zm3.807 1.355c-.42.349-1.059.515-1.84.515-.468 0-.799-.03-1.024-.06v-3.917A7.947 7.947 0 0 1 11.66 14c.757 0 1.249.136 1.633.426.415.308.675.799.675 1.504 0 .763-.279 1.29-.663 1.615zM17 14.77h-1.532v.911H16.9v.734h-1.432v1.604h-.906V14.03H17v.74zM14 9h-1V4l5 5h-4z",fill:"white"})],-1),K={key:2,class:"block bg-primary rounded-md mb-4 p-4"},P=["href"],Q={class:"text-white"},R=e("svg",{class:"w-12 h-12 inline",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M12.186 14.552c-.617 0-.977.587-.977 1.373 0 .791.371 1.35.983 1.35.617 0 .971-.588.971-1.374 0-.726-.348-1.349-.977-1.349z",fill:"white"}),e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM9.155 17.454c-.426.354-1.073.521-1.864.521-.475 0-.81-.03-1.038-.06v-3.971a8.16 8.16 0 0 1 1.235-.083c.768 0 1.266.138 1.655.432.42.312.684.81.684 1.522 0 .775-.282 1.309-.672 1.639zm2.99.546c-1.2 0-1.901-.906-1.901-2.058 0-1.211.773-2.116 1.967-2.116 1.241 0 1.919.929 1.919 2.045-.001 1.325-.805 2.129-1.985 2.129zm4.655-.762c.275 0 .581-.061.762-.132l.138.713c-.168.084-.546.174-1.037.174-1.397 0-2.117-.869-2.117-2.021 0-1.379.983-2.146 2.207-2.146.474 0 .833.096.995.18l-.186.726a1.979 1.979 0 0 0-.768-.15c-.726 0-1.29.438-1.29 1.338 0 .809.48 1.318 1.296 1.318zM14 9h-1V4l5 5h-4z",fill:"white"}),e("path",{d:"M7.584 14.563c-.203 0-.335.018-.413.036v2.645c.078.018.204.018.317.018.828.006 1.367-.449 1.367-1.415.006-.84-.485-1.284-1.271-1.284z",fill:"white"})],-1),X={class:"w-full mb-4 border border-gray-200 rounded-lg bg-gray-50 dark:bg-gray-700 dark:border-gray-600"},Y={class:"px-4 py-2 bg-white rounded-t-lg dark:bg-gray-800"},Z=["placeholder"],ee={class:"flex items-center justify-between px-3 py-2 border-t dark:border-gray-600"},te={class:"flex ps-0 space-x-1 rtl:space-x-reverse sm:ps-2"},se=e("svg",{class:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 12 20"},[e("path",{stroke:"currentColor","stroke-linejoin":"round","stroke-width":"2",d:"M1 6v8a5 5 0 1 0 10 0V4.5a3.5 3.5 0 1 0-7 0V13a2 2 0 0 0 4 0V6"})],-1),oe=[se],re={key:1,class:"flex justify-center items-center"},ae={__name:"Spport",props:{chats:Object,chat:Object},setup(a){const d=a,i=y({content:null,file:null});function h(){document.getElementById("messages")&&(document.getElementById("messages").scrollTop=1e4),i.content=""}function _(){document.getElementById("attachement").click()}w(()=>{h()});function b(){d.chat&&i.post(route("admin.support.create",{chat_id:d.chat.id}),{onFinish:()=>h()})}function v(r){var n=r.target.files[0];i.file=n,d.chat&&i.post(route("admin.support.file",{chat_id:d.chat.id}),{onFinish:()=>h()})}return(r,n)=>(s(),k(B,null,{default:x(()=>[e("div",$,[e("div",C,[e("div",F,[(s(!0),o(p,null,f(a.chats,t=>(s(),o("a",{href:r.route("admin.support",{chat_id:t.id}),class:u(["flex justify-center items-center border border-gray-300 border-solid overflow-hidden mb-4 rounded-sm p-2",{"border-4 border-primary":t.has_unreaded_message_count>0}])},[e("img",{src:t.user.image,alt:"",class:"w-10 h-10 rounded-full mr-4"},null,8,S),e("div",E,l(t.user.name),1)],10,H))),256))]),e("div",I,[a.chat?(s(),o("div",N,[a.chat.messages.length==0?(s(),o("div",T,l(r.$t("Start Conversation")),1)):(s(),o("div",A,[e("div",D,[(s(!0),o(p,null,f(a.chat.messages,t=>(s(),o("div",{class:u(["flex",{"justify-start":t.user_id!=r.$page.props.auth.user.id,"justify-end":t.user_id==r.$page.props.auth.user.id}])},[t.is_file=="yes"?(s(),o("div",O,[["png","gif","svg","jpg","jpeg"].includes(t.file_type)?(s(),o("div",q,[e("img",{src:t.file_url,alt:""},null,8,L)])):["pdf"].includes(t.file_type)?(s(),o("div",U,[e("a",{class:"flec justify-center items-center",href:t.file_url,target:"_blanck"},[e("span",G,l(t.file_original_name),1),J],8,W)])):["xlsx","csv","doc","docx"].includes(t.file_type)?(s(),o("div",K,[e("a",{class:"flec justify-center items-center",href:t.file_url,target:"_blanck"},[e("span",Q,l(t.file_original_name),1),R],8,P)])):z("",!0)])):(s(),o("div",{key:1,class:u(["block bg-gray-100 p-4 mb-4 rounded-md",{"bg-primary text-white":t.user_id==r.$page.props.auth.user.id}]),style:{width:"fit-content"}},l(t.message),3))],2))),256))]),e("form",null,[e("div",X,[e("div",Y,[M(e("textarea",{id:"comment",rows:"4",class:"w-full px-0 text-sm text-gray-900 bg-white border-0 dark:bg-gray-800 focus:ring-0 dark:text-white dark:placeholder-gray-400",placeholder:r.$t("Write message..."),required:"","onUpdate:modelValue":n[0]||(n[0]=t=>c(i).content=t)},null,8,Z),[[j,c(i).content]]),m(g,{class:"mt-2",message:c(i).errors.content},null,8,["message"]),m(g,{class:"mt-2",message:c(i).errors.file},null,8,["message"])]),e("div",ee,[e("button",{type:"submit",onClick:V(b,["prevent"]),class:"inline-flex items-center py-2.5 px-4 text-xs font-medium text-center text-white bg-blue-700 rounded-lg focus:ring-4 focus:ring-blue-200 dark:focus:ring-blue-900 hover:bg-blue-800"},l(r.$t("Send")),1),e("div",te,[e("input",{type:"file",id:"attachement",style:{display:"none !important"},onChange:v},null,32),e("button",{type:"button",onClick:n[1]||(n[1]=t=>_()),class:"inline-flex justify-center items-center p-2 text-gray-500 rounded cursor-pointer hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600"},oe)])])])])]))])):(s(),o("div",re,l(r.$t("Start Conversation")),1))])])])]),_:1}))}};export{ae as default};
