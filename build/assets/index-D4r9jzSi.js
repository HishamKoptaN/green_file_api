import{m as U,l as B,p as $,q as S,o as l,c as N,d as h,w as p,e as u,s as y,a as e,x as k,n as E,y as L,i as r,z,Q as O,j as V,O as _,r as w,v,g as a,h as x,t as o,F as g,f as P}from"./app-QSAf45D3.js";import{_ as j}from"./AdminLayout-DNscmmc0.js";import{_ as T}from"./Pagination-BLcqO_qP.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50","scroll-region":""},W=e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1),F=[W],q={__name:"Modal",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0}},emits:["close"],setup(t,{emit:i}){const d=t,C=i;U(()=>d.show,()=>{d.show?document.body.style.overflow="hidden":document.body.style.overflow=null});const n=()=>{d.closeable&&C("close")},c=m=>{m.key==="Escape"&&d.show&&n()};B(()=>document.addEventListener("keydown",c)),$(()=>{document.removeEventListener("keydown",c),document.body.style.overflow=null});const b=S(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"})[d.maxWidth]);return(m,M)=>(l(),N(z,{to:"body"},[h(k,{"leave-active-class":"duration-200"},{default:p(()=>[u(e("div",D,[h(k,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:p(()=>[u(e("div",{class:"fixed inset-0 transform transition-all",onClick:n},F,512),[[y,t.show]])]),_:1}),h(k,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:p(()=>[u(e("div",{class:E(["mb-6 bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full sm:mx-auto",b.value])},[t.show?L(m.$slots,"default",{key:0}):r("",!0)],2),[[y,t.show]])]),_:3})],512),[[y,t.show]])]),_:3})]))}},J={data(){return{plan:new URLSearchParams(window.location.search).get("plan"),showBlockModal:!1,showNotificationModal:!1,bulckNotifications:!1,user_id:null,block_type:"permanent",block_time:1,notification_content:null,users_ids:[],permissions:O().props.auth.permissions}},props:{users:Object,plans:Object},components:{AdminLayout:j,Link:V,Pagination:T,Modal:q},methods:{delete(t){_.delete(route("admin.users.destroy",{user:t}))},block(t){this.user_id=t,this.showBlockModal=!0},notification(t){this.user_id=t,this.showNotificationModal=!0},notifications(t){this.bulckNotifications=!0,this.showNotificationModal=!0},closeModal(){this.showBlockModal=!1,this.showNotificationModal=!1},blockUser(){_.patch(route("admin.users.update",{user:this.user_id}),{status:"block",block_type:this.block_type,block_time:this.block_time},{onError:t=>this.showBlockModal=!0,onSuccess:t=>this.showBlockModal=!1})},sendNotification(){_.patch(route("admin.users.update",{user:this.user_id}),{status:"notification",content:this.notification_content},{onError:t=>this.showNotificationModal=!0,onSuccess:t=>this.showNotificationModal=!1})},sendNotifications(){_.patch(route("admin.users.update",{user:1}),{status:"notifications",users:JSON.stringify(this.users_ids),content:this.notification_content},{onError:t=>this.showNotificationModal=!0,onSuccess:t=>this.showNotificationModal=!1})},selectUser(t){if(t.target.checked)this.users_ids.includes(t.target.value)||this.users_ids.push(t.target.value);else{var i=this.users_ids.indexOf(t.target.value);i!==-1&&this.users_ids.splice(i,1)}}},watch:{plan(t){_.get(route("admin.users.index"),{plan:t})}}},Q={class:"mt-4 p-2 pt-6 bg-gray-50"},R={class:"my-2 block md:flex justify-between items-center"},G={class:"flex"},H=e("option",{value:null},"Plan",-1),I=["value"],K={class:"flex mt-2 md:mt-0"},X=["href"],Y={key:0,class:"block my-4 py-4"},Z={class:"block p-4 bg-green-400 font-xl text-white rounded-md"},tt={class:"my-6"},et={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},st={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},ot={class:"text-xs uppercase bg-primary text-white dark:bg-gray-700 dark:text-gray-400"},nt={scope:"col",class:"px-6 py-3"},it={scope:"col",class:"px-6 py-3"},lt={scope:"col",class:"px-6 py-3"},at={scope:"col",class:"px-6 py-3"},ct={scope:"col",class:"px-6 py-3"},rt={scope:"col",class:"px-6 py-3"},dt={scope:"col",class:"px-6 py-3"},ut={scope:"col",class:"px-6 py-3"},mt={scope:"col",class:"px-6 py-3"},ht={key:0,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},pt=e("th",{class:"px-6 py-4 text-center",colspan:"100"}," No Users ",-1),_t=[pt],ft={class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},bt={class:"px-6 py-4"},yt=["name","id","value"],kt=["textContent"],wt=["textContent"],vt=["textContent"],xt=["textContent"],gt=["textContent"],Ct=["textContent"],Mt=["textContent"],Nt={class:"px-6 py-4"},Ut=["href"],Bt=["href"],$t=["onClick"],St=["onClick"],Et=["onClick"],Lt={class:"block p-4 bg-white"},zt={class:"block mb-4"},Ot={for:"",class:"mb-2 block"},Vt={value:"permanent"},Pt={value:"temporary"},jt={key:0,class:"block mb-4"},Tt={for:"",class:"mb-2 block"},At=["value"],Dt={class:"block"},Wt={class:"block p-4 bg-white"},Ft={class:"block mb-4"},qt={for:"",class:"mb-2 block"},Jt={class:"block"};function Qt(t,i,d,C,n,c){const b=w("Pagination"),m=w("Modal"),M=w("AdminLayout");return l(),N(M,null,{default:p(()=>[e("div",Q,[e("div",R,[e("div",G,[u(e("select",{class:"rounded-lg","onUpdate:modelValue":i[0]||(i[0]=s=>n.plan=s)},[H,(l(!0),a(g,null,x(d.plans,s=>(l(),a("option",{value:s.id},o(s.name),9,I))),256))],512),[[v,n.plan]]),n.permissions.includes("notifications")?(l(),a("a",{key:0,class:"p-2 mx-2 font-normal text-sm bg-white text-black border border-primary rounded-md capitalize cursor-pointer",onClick:i[1]||(i[1]=s=>c.notifications(null))},o(t.$t("send bulck notifications")),1)):r("",!0)]),e("div",K,[n.permissions.includes("create user")?(l(),a("a",{key:0,class:"p-2 font-normal text-sm bg-primary text-white rounded-md capitalize",href:t.route("admin.users.create")},o(t.$t("create user")),9,X)):r("",!0)])]),t.$page.props.success?(l(),a("div",Y,[e("div",Z,o(t.$page.props.success),1)])):r("",!0),e("div",tt,[e("div",et,[e("table",st,[e("thead",ot,[e("tr",null,[e("th",nt,o(t.$t("#")),1),e("th",it,o(t.$t("status")),1),e("th",lt,o(t.$t("name")),1),e("th",at,o(t.$t("role")),1),e("th",ct,o(t.$t("email")),1),e("th",rt,o(t.$t("balance")),1),e("th",dt,o(t.$t("manager transfers")),1),e("th",ut,o(t.$t("plan")),1),e("th",mt,o(t.$t("options")),1)])]),e("tbody",null,[d.users.data.length==0?(l(),a("tr",ht,_t)):r("",!0),(l(!0),a(g,null,x(d.users.data,s=>(l(),a("tr",ft,[e("td",bt,[e("input",{type:"checkbox",name:"user-"+s.id,id:"user-"+s.id,value:s.id,onChange:i[2]||(i[2]=(...f)=>c.selectUser&&c.selectUser(...f))},null,40,yt)]),e("td",{class:"px-6 py-4",textContent:o(s.status)},null,8,kt),e("td",{class:"px-6 py-4",textContent:o(s.name)},null,8,wt),e("td",{class:"px-6 py-4",textContent:o(s.roles.length>0?s.roles[0].name:"Member")},null,8,vt),e("td",{class:"px-6 py-4",textContent:o(s.email)},null,8,xt),e("td",{class:"px-6 py-4",textContent:o(s.balance+"$")},null,8,gt),e("td",{class:"px-6 py-4",textContent:o(s.admin_transfers_count)},null,8,Ct),e("td",{class:"px-6 py-4",textContent:o(s.plan.name)},null,8,Mt),e("td",Nt,[n.permissions.includes("edit user")?(l(),a("a",{key:0,href:t.route("admin.users.edit",{user:s.id}),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline mx-1"},o(t.$t("edit")),9,Ut)):r("",!0),n.permissions.includes("show user")?(l(),a("a",{key:1,href:t.route("admin.users.show",{user:s.id}),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline mx-1"},o(t.$t("show")),9,Bt)):r("",!0),n.permissions.includes("delete user")?(l(),a("button",{key:2,type:"button",onClick:f=>this.delete(s.id),class:"font-medium text-red-600 dark:text-red-500 hover:underline mx-1"},o(t.$t("delete")),9,$t)):r("",!0),n.permissions.includes("block user")?(l(),a("button",{key:3,type:"button",onClick:f=>this.block(s.id),class:"font-medium text-red-800 dark:text-red-500 hover:underline mx-1"},o(t.$t("block")),9,St)):r("",!0),n.permissions.includes("notifications")?(l(),a("button",{key:4,type:"button",onClick:f=>this.notification(s.id),class:"font-medium text-blue-800 dark:text-blue-500 hover:underline mx-1"},o(t.$t("send notification")),9,Et)):r("",!0)])]))),256))])])])]),h(b,{items:d.users},null,8,["items"])]),h(m,{show:n.showBlockModal,onClose:c.closeModal},{default:p(()=>[e("div",Lt,[e("div",zt,[e("label",Ot,o(t.$t("type of block")),1),u(e("select",{class:"block p-2 bg-white w-full","onUpdate:modelValue":i[3]||(i[3]=s=>n.block_type=s)},[e("option",Vt,o(t.$t("Permanent")),1),e("option",Pt,o(t.$t("Temporary")),1)],512),[[v,n.block_type]])]),n.block_type=="temporary"?(l(),a("div",jt,[e("label",Tt,o(t.$t("time of block")),1),u(e("select",{class:"block p-2 bg-white w-full","onUpdate:modelValue":i[4]||(i[4]=s=>n.block_time=s)},[(l(),a(g,null,x(30,s=>e("option",{value:s},o(s+t.$t(" Day")),9,At)),64))],512),[[v,n.block_time]])])):r("",!0),e("div",Dt,[e("button",{onClick:i[5]||(i[5]=(...s)=>c.blockUser&&c.blockUser(...s)),class:"p-2 font-normal text-base bg-primary text-white rounded-md capitalize"},o(t.$t("submit")),1)])])]),_:1},8,["show","onClose"]),h(m,{show:n.showNotificationModal,onClose:c.closeModal},{default:p(()=>[e("div",Wt,[e("div",Ft,[e("label",qt,o(t.$t("notification content")),1),u(e("textarea",{class:"mb-2 block bg-white w-full","onUpdate:modelValue":i[6]||(i[6]=s=>n.notification_content=s)},null,512),[[P,n.notification_content]])]),e("div",Jt,[e("button",{onClick:i[7]||(i[7]=s=>n.bulckNotifications==!0?c.sendNotifications():c.sendNotification()),class:"p-2 font-normal text-base bg-primary text-white rounded-md capitalize"},o(t.$t("submit")),1)])])]),_:1},8,["show","onClose"])]),_:1})}const Kt=A(J,[["render",Qt]]);export{Kt as default};
